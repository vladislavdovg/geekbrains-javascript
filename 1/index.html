<!DOCTYPE html>
<html lang="ru">
<head>
	<meta charset="utf-8">
	<title>Document</title>
	<style>
		* { margin: 0; padding: 0; }
		#matrix { margin: 100px auto; width: 420px; border-right: 1px solid #ccc; border-bottom: 1px solid #ccc; }
		#matrix:after { content: ' '; display: block; clear: both; }
		#matrix .cell { float: left; width: 21px; height: 21px; box-sizing: border-box; border-left: 1px solid #ccc; border-top: 1px solid #ccc; }
		#matrix .cell.active { background-color: #ccc; }
	</style>
	<script>
		var keyHandler = function(keyCode, coords) {
			if (keyCode == 37 || keyCode == 38 || keyCode == 39 || keyCode == 40) {
				toggleCell(coords[0], coords[1]);
				switch (keyCode) {
					case 37:
						coords[1]--;
						break;
					case 38:
						coords[0]--;
						break;
					case 39:
						coords[1]++;
						break;
					case 40:
						coords[0]++;
						break;
				};
				toggleCell(coords[0], coords[1]);
				return coords;
			};
		};

		// Создание матрицы
		var createMatrix = function(sideLength) {
			this.sideLength = sideLength;
			var body = document.getElementsByTagName('body')[0];
			var matrix = document.createElement('div');
			matrix.id = 'matrix';
			body.appendChild(matrix);

			for (var i = 0; i < sideLength*sideLength; i++) {
				var div = document.createElement('div');
				div.className = 'cell';
				matrix.appendChild(div);
			}
		};

		// Получение ячейки матрицы по координатам
		var getCell = function(row, col) {
			var cellIndex = sideLength * (row - 1) + col - 1;
			return matrix.childNodes[cellIndex];
		};

		// Чтение ячейки матрицы - УДАЛИТЬ, ЕСЛИ НЕ БУДЕТ ИСПОЛЬЗОВАНА!!!
		var readCell = function(row, col) {
			// Принимает координаты ячейки,
			// возвращает true, если закрашена
			// и false, если не закрашена.
			var cell = getCell(row, col);
			return cell.classList.contains('active');
		};

		// Переключение ячейки матрицы
		var toggleCell = function(row, col) {
			// Принимает координаты ячейки,
			// если ячейка закрашина, убирает закраску
			// иначе закрашивает ячейку.
			var cell = getCell(row, col);
			cell.classList.toggle('active');
		};

		// Установка ячейки матрицы - УДАЛИТЬ, ЕСЛИ НЕ БУДЕТ ИСПОЛЬЗОВАНА!!!
		var setCell = function(row, col, val) {
			// Принимает координаты ячейки,
			// если val == true, закрашивает,
			// иначе убирает закраску.
			var cell = getCell(row, col);
			if (val) {
				cell.classList.add('active');
			} else {
				cell.classList.remove('active');
			};
		};

		// Точка входа
		window.onload = function() {
			createMatrix(20);
			toggleCell(4, 4);

			// Инициализация - ВЫНЕСТИ В ОТДЕЛЬНУЮ ФУНКЦИЮ!!!
			var row = 4;
			var col = 4;

			// Обработка нажатия клавиш
			document.onkeydown = function(event) {
				if (!event) event = window.event;
				var keyCode = event.keyCode || event.which;
				coords = keyHandler(keyCode, [row, col]);
				row = coords[0];
				col = coords[1];
			};
		};
	</script>
</head>
<body>
</body>
</html>